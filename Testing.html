<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plotly Graph with Annotations</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
<div id="graph"></div>
<button id="save-btn">Save Graph</button>

<script>
    // Donn√©es pour le graphique
    let trace1 = {
        x: [1, 2, 3, 4],
        y: [10, 15, 13, 17],
        mode: 'markers',
        type: 'scatter'
    };

    let data = [trace1];

    // Configuration des annotations
    let layout = {
        title: 'Graph with Annotations',
        annotations: [
            {
                x: 2,
                y: 15,
                xref: 'x',
                yref: 'y',
                text: 'Peak',
                showarrow: true,
                arrowhead: 7,
                ax: 0,
                ay: -40
            }
        ]
    };

    // Tracer le graphique
    Plotly.newPlot('graph', data, layout);

    // Fonction pour sauvegarder le graphique
    document.getElementById('save-btn').addEventListener('click', function() {
        Plotly.toImage(document.getElementById('graph'), {format: 'png'})
            .then(function(dataUrl) {
                let a = document.createElement('a');
                a.href = dataUrl;
                a.download = 'graph.png';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            });
    });
</script>
</body>
</html>
